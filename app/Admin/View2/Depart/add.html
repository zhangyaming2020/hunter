
<!--添加栏目-->
<div class="dialog_content">
	<form id="info_form" action="{:u('depart/add')}" method="post">
	<table width="100%" class="table_form">
		<tr> 
			<th width="120">{:L('article_cate_parent')} :</th>
			<td>
				<select class="J_cate_depart_select mr10" data-pid="0" data-uri="{:U('depart/ajax_getchilds')}" data-selected="{$spid}"></select>
				<input type="hidden" name="pid" id="J_pid" />
			</td>
		</tr>
		<tr>
			<th>名称 :</th>
			<td><input type="text" name="name" id="name" departholder="请输入名称" class="input-text" size="30"></td>
		</tr>
       
        <tr>
		<th>{:L('enabled')} :</th>
            <td>
                <label><input type="radio" name="status" value="1" checked> {:L('yes')}</label>&nbsp;&nbsp;
                <label><input type="radio" name="status" value="0"> {:L('no')}</label>
            </td>
        </tr>

	</table>
	</form>
</div>
<script>
$(function(){
	
    $('input[name=type]').click(function(){
        var type = $(this).val();
        if(type == 2){
            $('.is_hot').show(200);
        }else{
            $('.is_hot').hide(200);
        }
    })
    $.formValidator.initConfig({formid:"info_form",autotip:true});
	$('#name').formValidator({onshow:lang.please_input+"名称",onfocus:lang.please_input+"名称"}).inputValidator({min:1,onerror:lang.please_input+"名称"});

	$('#info_form').ajaxForm({success:complate,dataType:'json'});
	function complate(result){
		if(result.status == 1){
			$.dialog.get(result.dialog).close();
			$.pinphp.tip({content:result.msg});
			var duri="{:U('dic/detail', array('remark'=>$dic[1],'id'=>$dic[0]))}";
				$.get(duri,'', function(result){
					if(result.status == 1){
						$.dialog.get('detail').content(result.data);
					}
					return false;
			});
			return false;

		} else {
			$.pinphp.tip({content:result.msg, icon:'alert'});
		}
	}

    $('.J_cate_depart_select').cate_select({top_option:lang.all,field:'J_pid',target_class:'J_cate_depart_select'}); //分类联动
});
</script>